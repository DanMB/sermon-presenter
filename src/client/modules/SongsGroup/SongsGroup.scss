@import 'src/client/style/shared.scss';

.SongsGroup {
	--minSize: 300px;
	--color: #{$text};
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(var(--minSize), 1fr));
	grid-auto-rows: max-content;
	grid-gap: 1.5rem;
	padding: 1.5rem;
	max-height: 100vh;
	overflow-y: auto;
	@include cleanScrollbar();

	.slide {
		display: flex;
		position: relative;
		padding-bottom: 56.25%;
		cursor: pointer;
		$borderSpace: 4px;
		$borderSize: 3px;
		border-radius: 6px;
		box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.1), 0 1px 3px 0 rgba(0, 0, 0, 0.6);
		background-color: $box;

		// &::after {
		// 	content: '';
		// 	display: block;
		// 	position: absolute;
		// 	top: #{($borderSpace + $borderSize) * -1};
		// 	left: #{($borderSpace + $borderSize) * -1};
		// 	height: calc(#{($borderSpace + $borderSize) * 2} + 100%);
		// 	width: calc(#{($borderSpace + $borderSize) * 2} + 100%);
		// 	box-sizing: border-box;
		// 	pointer-events: none;
		// 	z-index: 1;
		// }

		// &:hover,
		// &:focus {
		// 	&::after {
		// 		top: #{$borderSize * -1};
		// 		left: #{$borderSize * -1};
		// 		height: calc(#{$borderSize * 2} + 100%);
		// 		width: calc(#{$borderSize * 2} + 100%);
		// 		border: #{$borderSize} solid darken($border, 10%);
		// 	}
		// }

		// &.subActive::after {
		// 	border: #{$borderSize} solid $border;
		// }

		// &.active::after {
		// 	border: #{$borderSize} solid $primary;
		// }

		&:hover,
		&:focus {
			box-shadow: 0 0 0 3px lighten($box, 12%);
		}

		&.subActive {
			box-shadow: 0 0 0 3px desaturate(lighten($box, 27%), 10%);

			&:hover,
			&:focus {
				box-shadow: 0 0 0 3px lighten($box, 12%);
			}
		}

		&.active {
			box-shadow: 0 0 0 3px var(--color);
		}

		.hotkey {
			position: absolute;
			font-size: 18px;
			top: 0.1em;
			left: 0.1em;
			height: 1.6em;
			padding: 0 0.35em;
			min-width: 1.5em;
			line-height: 1.5em;
			border-radius: 6px;
			// border: 2px solid lighten($box, 20%);
			background: $box;
			z-index: 3;
			text-align: center;
			font-weight: weight(bold);
			font-family: $mono-stack;

			li {
				display: inline-block;
				height: 0.8em;
				width: 0.8em;
				margin-right: 0.05em;
				margin-left: -0.15em;
				margin-bottom: 0.1em;
				background: no-repeat center center;
				background-size: contain;
				background-image: url("data:image/svg+xml,%0A%3Csvg stroke='%23f2f5f8' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='18 15 12 9 6 15'%3E%3C/polyline%3E%3C/svg%3E");
			}
		}

		.preview {
			width: calc(100% - 30px);
			height: calc(100% - 30px);
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			position: absolute;
			background: no-repeat center center;
			background-size: cover;
			z-index: 2;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 6px;
			overflow: hidden;

			&[style*='image'] {
				.textContent {
					padding: 15px 20px;
					background-color: rgba($box, 0.5);
					backdrop-filter: blur(2px);

					.inner {
						text-shadow: 0.1em 0.1em 0.15em rgba(0, 0, 0, 0.7);
					}
				}
			}

			.textContent {
				height: calc(100% + 2px);
				width: calc(100% + 2px);
				margin: -1px;
				display: flex;
				position: relative;
				z-index: 2;
				padding: 15px 12px;

				.inner {
					font-size: 1.2em;
					line-height: 1.25em;
					white-space: pre-wrap;
					overflow: hidden;
					text-overflow: ellipsis;
					-webkit-mask-image: linear-gradient(to top, transparent 0, black 1.25em 100%);
					-webkit-mask-size: 100% 100%;
					mask-image: linear-gradient(to top, transparent 0, black 1.25em 100%);
					mask-size: 100% 100%;
					height: 100%;
					width: 100%;
				}
			}
		}

		&:hover .preview .textContent {
			// background-color: rgba(0, 0, 0, 0.25);
		}
	}
}
